---
layout: post
title: Ruby on Rails: starter project part-2
tags: [Blog, MVC, Ruby, Ruby-on-Rails, Tutorial]
comments: true
---

<img src="/images/MVC.jpg" alt="post screen" />

Tutorial getting started on ruby on rails part-2
MVC

# Why Read this

* If your coming over from part-1.
* If you actually want to understand what is going on behind scaffolding.
* If you want an intro to MVC.

I will be working on a project in Ruby on Rails so I am going to need to be familiar with it. In particular how CRUD works in ruby on Rails. So what I will be doing is creating a blog in ruby on rails to gain familiarity

## What is MVC

Basically MVC is an programming acronym for:

* model
* view
* controller

mvc has become the standard for applications that deal with data. We will go over it in this project.

## How Rails Processes Request

So did you wonder what was going on when you loaded the localhost URL into your browser after spinning up the server. This is an over view of whats going on.

Your browser sends an _HTTP GET request_ when you press enter, there are other types of request like _POST_ & _DELETE_ which we will get into later. We are going to go over a GET request.

1. Rails looks at the request, to figure out which code should handle it.
2. The request _gets_ routed to an action method on a "controller".
3. The controller loads the resource in from database using a "model class".
4. The controller renders a "view" using the model data, to generate the response content.

Alright if you don't understand what this is talking about then that means this tutorial is for you because we are going to go over it in detail.

![ruby blog](https://media.giphy.com/media/ayQ99hp01HFN6/giphy.gif)


  * HTTP stands for Hyper Text Transfer Protocol
  * "localhost:3000" is the **host** and **port**.
  * "/posts" is the **path** to the resource you want.

## The Controller

Lets go over the starting part of **MVC** "the controller". Which I bet confuses you because it is mvc not cmv. Well I think they choose the mvc acronym because it sounds cooler and I am down for things sounding cool.

the controller is responsible for handling the browser request we spoke about before. it **CONTROLS** both the model and the view.

![ruby blog](https://media.giphy.com/media/l0G18BkChcRRctMZ2/giphy.gif)

If you want to get a look at you controller in your project go in to your blog app and

```
$ cd blog/controllers
```
take a look at the posts_controller.rb file in the controllers folder. this is were Rails generates source code files for controller classes.

<img src="/images/Controller.png" alt="post screen" />

This is an example of a method in ruby
```
def index
  @posts = Post.all
end
```

this method renders data from the **model**, it basically renders all of our post. You really cant understand the controller with out understanding what it controls so we will move on to the model.

## The Model
![ruby blog](https://media.giphy.com/media/aQCCNezRpb9Hq/giphy.gif)

Basically the model is responsible for dealing with all of the data in your app.

The model is conveniently stored in the models folder
```
$ cd blog/models
```
alright so the post.rb file is the one we want to take a look at here.

<img src="/images/model.png" alt="post screen" />

So there doesn't seem to be much going on here. that is because post.rb is a sub class of application record. that is stored in the application_record.rb if you would like to take a look it is right above the post.rb file.

Check this out, start up your blog with a rails s command then go to your post page. now go back to your terminal where you started up your rails app. You should see something similar to this.

<img src="/images/terminal.png" alt="post screen" />

pay attention to the highlighted text:
```
Post Load (0.8ms)  SELECT "posts".* FROM "posts"
```
rails cant talk directly to a database so it generates a _structured query language_ short for SQL.
this is a query being generated by the method we looked at before in the controller.
```
def index
  @posts = Post.all
end
```

You see whats going on here? we now see the connection between our **controller** and our **model** now lets take a look at the **view**.

## The View

The view is responsible for displaying data to your users. People are visual thats why I throw up these crazy gifs.

![ruby blog](https://media.giphy.com/media/wFbI8gwCfCxeo/giphy.gif)

Though we are pushing data around, CRUDING things up with the model and the controller. How do we see all of this data we are making changes to.

>The view is handled mostly through HTML templates not to be confused with HTTP.

HTML stands for hyper text mark up language. If your not familiar with it w3schools is my jam for learning about web basics: https://www.w3schools.com/html/

If you already know html then next thing to get acquainted with is Ruby and ERB. Ruby is the flour while rails is the actual pizza its self.

![ruby blog](https://media.giphy.com/media/eRVV0dgoNRi3m/giphy.gif)

**ERB** (embedded RuBY) is what we use for **dynamic** data(_that_ means data that it is able to be changed or **_mutable_**).
```
<%= csrf_meta_tags %>
<%= yield %>
```

> I know there is allot of languages being thrown around her HTML,Ruby,SQL etc... All of these languages do take time to master and fully understand but don't focus on that right now. Just focus on the purposes of each language.

### Back To The View
If you have been following this tutorial you should have no trouble locating where the view folder is in your project.

So go in to your views folder and then inside of that folder is the layouts folder. Inside of that folder you will find the application.html.erb file.

## So How It All Comes Together
This image illustrates the behind the scenes happenings going on in your ruby on rails app. I screen captured it from my terminal. When you start your rails app and interact with it in the browser the terminal updates.

<img src="/images/terminal_whole.png" alt="post screen" />

I underlined the statements that corresponds with which different part of **MVC** and I connect them with color. First, the Browser requests a page after rails receives the request then routes it to the appropriate controller class and action method.

| Model         | Controller          |View    |
|:------------- |:-------------|:-------------|
| <span style="color:blue">Blue</span> | <span style="color:red">Red</span> | <span style="color:Green">Green</span> |
|So when a browser requests a page Rails receives the request.|Routes it to the appropriate controller class and action method.|Then the controller embeds the modal data within a view. The results of rendering that view gets returned to the browser.|

Basically that sums up the relationship between the:
* model
* View
* Controller

Now You know whats going on behind the scenes when you generate that scaffold.
